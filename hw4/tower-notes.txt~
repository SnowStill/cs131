| ?- ambiguous(4,C,T1,T2).

C = counts([4,2,2,1],[1,2,2,4],[4,2,2,1],[1,2,2,4])
T1 = [[1,2,3,4],[2,1,4,3],[3,4,1,2],[4,3,2,1]]
T2 = [[1,2,3,4],[2,4,1,3],[3,1,4,2],[4,3,2,1]] ?
Action (; for next solution, a for all solutions, RET to stop) ? ;

C = counts([4,2,2,1],[1,2,2,4],[4,2,2,1],[1,2,2,4])
T1 = [[1,2,3,4],[2,4,1,3],[3,1,4,2],[4,3,2,1]]
T2 = [[1,2,3,4],[2,1,4,3],[3,4,1,2],[4,3,2,1]] ? ;

C = counts([3,2,2,1],[1,2,2,3],[4,2,2,1],[1,2,2,4])
T1 = [[1,2,3,4],[3,1,4,2],[2,4,1,3],[4,3,2,1]]
T2 = [[1,2,3,4],[3,4,1,2],[2,1,4,3],[4,3,2,1]] ?

(27 ms) yes
| ?- ambiguous(5,C,T1,T2).

C = counts([4,2,3,2,1],[1,3,2,3,2],[5,3,2,3,1],[1,2,3,2,2])
T1 = [[1,2,3,4,5],[2,1,4,5,3],[4,5,2,3,1],[3,4,5,1,2],[5,3,1,2,4]]
T2 = [[1,2,3,4,5],[3,1,4,5,2],[4,5,2,3,1],[2,4,5,1,3],[5,3,1,2,4]] ? ;

C = counts([4,2,3,2,1],[2,2,1,4,3],[5,3,2,1,3],[1,2,3,2,2])
T1 = [[1,2,3,4,5],[2,1,4,5,3],[4,5,2,3,1],[5,3,1,2,4],[3,4,5,1,2]]
T2 = [[1,2,3,4,5],[3,1,4,5,2],[4,5,2,3,1],[5,3,1,2,4],[2,4,5,1,3]] ? ;

C = counts([3,4,3,2,1],[2,1,2,2,4],[5,3,1,3,2],[1,2,2,2,3])
T1 = [[1,2,3,4,5],[2,1,4,5,3],[5,3,1,2,4],[3,4,5,1,2],[4,5,2,3,1]]
T2 = [[1,2,3,4,5],[3,1,4,5,2],[5,3,1,2,4],[2,4,5,1,3],[4,5,2,3,1]] ? ;

C = counts([3,3,3,2,1],[3,2,1,3,3],[5,3,1,2,3],[1,2,2,3,2])
T1 = [[1,2,3,4,5],[2,1,4,5,3],[5,3,1,2,4],[4,5,2,3,1],[3,4,5,1,2]]
T2 = [[1,2,3,4,5],[3,1,4,5,2],[5,3,1,2,4],[4,5,2,3,1],[2,4,5,1,3]] ?

(18034 ms) yes
| ?- ambiguous(2,C,T1,T2).

no
| ?- ambiguous(3,C,T1,T2).

(2 ms) no
| ?- ambiguous(6,C,T1,T2).

C = counts([6,3,4,2,2,1],[1,2,2,4,2,4],[6,3,4,2,2,1],[1,2,2,4,2,4])
T1 = [[1,2,3,4,5,6],[2,1,4,3,6,5],[3,4,5,6,1,2],[4,3,6,5,2,1],[5,6,1,2,3,4],[6,5,2,1,4,3]]
T2 = [[1,2,3,4,5,6],[2,1,4,6,3,5],[3,4,2,5,6,1],[4,6,5,3,1,2],[5,3,6,1,2,4],[6,5,1,2,4,3]] ? ;

No ambiguous for n < 5.

ratio:

| ?- speedup(Ratio).

Ratio = 28.743990384615383 ?

The ratio is 28.

Reference: TA's slide from discussion1B.
https://stackoverflow.com/questions/4280986/how-to-transpose-a-matrix-in-prolog
transpose
